discover:
    how: fmf
    url: https://gitlab.com/testing-farm/tests
    test: /testing-farm/reserve-system

prepare:
    how: shell
    script: |
        # encode the ssh key via base64 and re-export it for the test
        encoded=$(base64 <<<"$RESERVE_SSH_PUBKEY")
        echo "TF_RESERVATION_AUTHORIZED_KEYS_BASE64=$encoded" >> "$TMT_PLAN_ENVIRONMENT_FILE"

execute:
    how: tmt

environment:
    # from the /testing-farm/reserve.fmf plan in
    # gitlab.com/testing-farm/tests
    TMT_TEST_PIDFILE_ROOT: /var/tmp/testing-farm-reserve
